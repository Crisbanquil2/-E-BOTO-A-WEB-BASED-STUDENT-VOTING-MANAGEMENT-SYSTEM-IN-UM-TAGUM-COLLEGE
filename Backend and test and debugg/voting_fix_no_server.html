<!DOCTYPE html>
<html>
<head>
    <title>Voting Fix - No Server Required</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .candidate-card { border: 1px solid #ddd; margin: 10px; padding: 15px; display: inline-block; width: 200px; }
        .candidate-card.voted { background: #d4edda; border-color: #28a745; }
        .vote-btn { padding: 8px 15px; background: #007bff; color: white; border: none; cursor: pointer; }
        .vote-btn:disabled { background: #6c757d; cursor: not-allowed; }
        .vote-btn.voted { background: #28a745; }
        .position-group { margin: 20px 0; padding: 15px; border: 2px solid #007bff; }
        .position-title { color: #007bff; margin-bottom: 15px; }
        .debug-info { background: #f8f9fa; padding: 10px; margin: 10px 0; border: 1px solid #dee2e6; }
        .instructions { background: #fff3cd; padding: 15px; margin: 20px 0; border: 1px solid #ffeaa7; }
    </style>
</head>
<body>
    <h1>Voting Fix - No Server Required</h1>
    
    <div class="instructions">
        <h3>⚠️ PHP Server Not Running</h3>
        <p>Since PHP is not available, this page will show you how to fix the voting issue manually.</p>
        <p><strong>To fix the voting buttons:</strong></p>
        <ol>
            <li>Open your main dashboard file: <code>Dasboard for Student or user/index.html</code></li>
            <li>Find the <code>displayCandidates</code> function</li>
            <li>Replace the button logic with the fixed version below</li>
        </ol>
    </div>
    
    <div class="debug-info">
        <h3>Current Issue</h3>
        <p>All vote buttons are disabled because the system thinks you've already voted for all positions.</p>
        <p>This is likely caused by:</p>
        <ul>
            <li>Wrong student ID being used</li>
            <li>Votes being loaded incorrectly</li>
            <li>Button state logic being wrong</li>
        </ul>
    </div>
    
    <div class="debug-info">
        <h3>Quick Fix</h3>
        <p>Replace the button logic in your dashboard with this:</p>
        <pre style="background: #f8f9fa; padding: 10px; border: 1px solid #dee2e6; overflow-x: auto;">
// In displayCandidates function, replace the button creation part with:
${positionCandidates.map(candidate => {
    const isVotedCandidate = votedForPosition && votedForPosition.candidate_id == candidate.candidate_id;
    const buttonText = isVotedCandidate ? 'Voted ✓' : 'Vote';
    const buttonClass = isVotedCandidate ? 'vote-btn voted' : 'vote-btn';
    // FIX: Only disable if THIS specific candidate was voted for
    const buttonDisabled = isVotedCandidate ? 'disabled' : '';
    
    return `
        <div class="candidate-card ${isVotedCandidate ? 'voted' : ''}">
            <h4>${candidate.first_name} ${candidate.last_name}</h4>
            <p>${candidate.gender} • ${candidate.course} • ${candidate.year_level}</p>
            <button class="${buttonClass}" ${buttonDisabled} 
                    onclick="voteForCandidate(${candidate.candidate_id}, '${position}')">
                ${buttonText}
            </button>
        </div>
    `;
}).join('')}
        </pre>
    </div>
    
    <div class="debug-info">
        <h3>Alternative: Clear All Votes</h3>
        <p>If you have access to your database, run this SQL to clear all votes:</p>
        <pre style="background: #f8f9fa; padding: 10px; border: 1px solid #dee2e6;">
DELETE FROM votes;
        </pre>
    </div>
    
    <div class="debug-info">
        <h3>Test the Fix</h3>
        <p>After making the changes:</p>
        <ol>
            <li>Open your main dashboard</li>
            <li>Check if vote buttons are now enabled</li>
            <li>Try voting for different positions</li>
            <li>Verify that you can vote for each position separately</li>
        </ol>
    </div>
    
    <script>
        // This is just for demonstration - the real fix is in the HTML above
        console.log('Voting fix instructions loaded');
    </script>
</body>
</html>
